/*

  SmartClient Ajax RIA system
  Version v13.0p_2023-09-15/LGPL Development Only (2023-09-15)

  Copyright 2000 and beyond Isomorphic Software, Inc. All rights reserved.
  "SmartClient" is a trademark of Isomorphic Software, Inc.

  LICENSE NOTICE
     INSTALLATION OR USE OF THIS SOFTWARE INDICATES YOUR ACCEPTANCE OF
     ISOMORPHIC SOFTWARE LICENSE TERMS. If you have received this file
     without an accompanying Isomorphic Software license file, please
     contact licensing@isomorphic.com for details. Unauthorized copying and
     use of this software is a violation of international copyright law.

  DEVELOPMENT ONLY - DO NOT DEPLOY
     This software is provided for evaluation, training, and development
     purposes only. It may include supplementary components that are not
     licensed for deployment. The separate DEPLOY package for this release
     contains SmartClient components that are licensed for deployment.

  PROPRIETARY & PROTECTED MATERIAL
     This software contains proprietary materials that are protected by
     contract and intellectual property law. You are expressly prohibited
     from attempting to reverse engineer this software or modify this
     software for human readability.

  CONTACT ISOMORPHIC
     For more information regarding license rights and restrictions, or to
     report possible license violations, please contact Isomorphic Software
     by email (licensing@isomorphic.com) or web (www.isomorphic.com).

*/

if(window.isc&&window.isc.module_Core&&!window.isc.module_Tour){isc.module_Tour=1;isc._moduleStart=isc._Tour_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log&&isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={message:'Tour load/parse time: '+(isc._moduleStart-isc._moduleEnd)+'ms',category:'loadTime'};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime');else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;isc.ClassFactory.defineClass("TourWindow","Window");isc.A=isc.TourWindow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.cancelButtonTitle="Skip the tour";isc.A.showActionButton=true;isc.A.actionButtonTitle="Next";isc.A.showHeader=false;isc.A.showFooter=false;isc.A.styleName="tourWindowBackground";isc.A.canDragResize=false;isc.A.isModal=false;isc.A.dismissOnOutsideClick=false;isc.A.showBody=true;isc.A.bodyStyle="tourWindowBody";isc.A.bodyDefaults={layoutMargin:0};isc.A.width=400;isc.A.autoSize=true;isc.A.autoCenter=true;isc.A.showCloseButton=true;isc.A.closeButtonConstructor="ImgButton";isc.A.closeButtonDefaults={width:16,height:16,snapTo:"TR",snapOffsetLeft:-10,snapOffsetTop:10,layoutAlign:"center",src:"[SKINIMG]Tour/close.png",showDown:false,showFocussed:false,showRollOver:false,click:function(){return this.creator.$7e()}};isc.A.frameConstructor="VLayout";isc.A.frameDefaults={width:"100%",height:"100%",margin:20};isc.A.contentLayoutConstructor="VStack";isc.A.contentLayoutDefaults={height:"*",membersMargin:10,layoutTopMargin:20,layoutRightMargin:20,layoutBottomMargin:25};isc.A.titleLabelConstructor="Label";isc.A.titleLabelDefaults={height:30,styleName:"tourWindowTitle"};isc.A.contentsConstructor="Canvas";isc.A.contentsDefaults={height:1,canSelectText:true,overflow:"visible",styleName:"tourWindowContents"};isc.A.buttonBarConstructor="HLayout";isc.A.buttonBarDefaults={height:30,membersMargin:5,overflow:"visible"};isc.A.spacerConstructor="LayoutSpacer";isc.A.cancelButtonConstructor="IButton";isc.A.cancelButtonDefaults={autoFit:true,wrap:false,height:30,baseStyle:"tourLinkButton",layoutAlign:"center",click:function(){return this.creator.$223r()}};isc.A.actionButtonConstructor="Button";isc.A.actionButtonDefaults={minWidth:100,autoFit:true,wrap:false,height:30,baseStyle:"tourButton",click:function(){return this.creator.$223s()}};isc.A.progressSpacerConstructor="LayoutSpacer";isc.A.progressSpacerDefaults={height:10};isc.A.progressLayoutConstructor="HLayout";isc.A.progressLayoutDefaults={membersMargin:5};isc.A.progressPercentConstructor="Label";isc.A.progressPercentDefaults={height:16,autoFit:true,wrap:false,styleName:"tourPercent"};isc.A.progressConstructor="Progressbar";isc.A.progressDefaults={length:"100%",breadth:10,layoutAlign:"center",border:"1px solid #d5d5d5",titleStyle:"tourPercent",baseStyle:null,progressStyle:"tourProgress",autoApplyOverState:false};isc.A.shakeOffset=15;isc.A.shakeDuration=300;isc.A.shakeCount=6;isc.B.push(isc.A.shake=function isc_TourWindow_shake(){var _1=this,_2=this.getLeft(),_3=this.shakeCount,_4=this.shakeDuration/_3;this.$2298=isc.EH.showClickMask(null,"hard");this.shakeStep(0,_3,_4,this.getLeft(),{target:this,methodName:"shakeComplete"})},isc.A.shakeStep=function isc_TourWindow_shakeStep(_1,_2,_3,_4,_5){var _6=(++_1==_2),_7=_4+(_6?0:(_1%2==0?+this.shakeOffset:-this.shakeOffset)),_8=this;var _9=_6?_5:function(){_8.shakeStep(_1,_2,_3,_4,_5)}
this.animateMove(_7,null,_9,_3)},isc.A.shakeComplete=function isc_TourWindow_shakeComplete(){isc.EH.hideClickMask(this.$2298);delete this.$2298});isc.B._maxIndex=isc.C+3;isc.A=isc.TourWindow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoChildParentMap={frame:"body",contentLayout:"frame",titleLabel:"contentLayout",contents:"contentLayout",buttonBar:"frame",spacer:"buttonBar",cancelButton:"buttonBar",actionButton:"buttonBar",closeButton:"body",progressSpacer:"frame",progressLayout:"frame",progressPercent:"progressLayout",progress:"progressLayout"};isc.B.push(isc.A.init=function isc_TourWindow_init(){if(!this.pointerSettings)this.pointerSettings={};if(this.pointerSettings.cornerOffset==null)this.pointerSettings.cornerOffset=2;return this.Super("init",arguments)},isc.A.createChildren=function isc_TourWindow_createChildren(){this.Super("createChildren",arguments);this.addAutoChild("closeButton");this.addAutoChild("frame");this.addAutoChild("contentLayout");this.addAutoChild("titleLabel",{contents:this.title});this.addAutoChild("contents",{contents:this.contents});if(this.contentComponents){this.contentLayout.addMembers(this.contentComponents)}
this.addAutoChild("buttonBar");this.addAutoChild("spacer");if(this.showCancelButton){this.addAutoChild("cancelButton",{title:this.cancelButtonTitle})}
if(this.showActionButton){this.addAutoChild("actionButton",{title:this.actionButtonTitle})}
if(this.showProgress){this.addAutoChild("progressSpacer");this.addAutoChild("progressLayout");var _1={percentDone:this.percentDone};if(this.showProgressPercent){var _2=(this.percentDone||0)+"%";if(this.showProgressPercentInline){_1.showTitle=true;_1.title=_2}else{this.addAutoChild("progressPercent",{contents:_2})}}
this.addAutoChild("progress",_1)}},isc.A.setShowCloseButton=function isc_TourWindow_setShowCloseButton(_1){},isc.A.setShowActionButton=function isc_TourWindow_setShowActionButton(_1){if(this.showActionButton==_1)return;this.showActionButton=_1;if(_1&&!this.actionButton){this.addAutoChild("actionButton",{title:this.actionButtonTitle})}else if(!_1&&this.actionButton){this.actionButton.hide()}},isc.A.$223r=function isc_TourWindow__cancelButtonClick(){return this.handleCancelClick()},isc.A.handleCancelClick=function isc_TourWindow_handleCancelClick(){if(this.onCancelClick&&this.onCancelClick()==false)return;return this.cancelClick()},isc.A.cancelClick=function isc_TourWindow_cancelClick(){this.close();return false},isc.A.$223s=function isc_TourWindow__actionButtonClick(){return this.handleActionClick()},isc.A.handleActionClick=function isc_TourWindow_handleActionClick(){if(this.actionButtonURL)window.open(this.actionButtonURL);if(this.onActionClick&&this.onActionClick()==false)return;return this.actionClick()},isc.A.actionClick=function isc_TourWindow_actionClick(){return false});isc.B._maxIndex=isc.C+10;if(isc.Process&&isc.DrawPane){isc.defineClass("Tour","Process");isc.A=isc.Tour;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.loadTour=function isc_c_Tour_loadTour(_1,_2){return this.loadProcess(_1,_2)},isc.A.getTour=function isc_c_Tour_getTour(_1){return this.getProcess(_1)});isc.B._maxIndex=isc.C+2;isc.A=isc.Tour.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoReset=true;isc.A.mode="tour";isc.A.allowDropOnDescendants=false;isc.A.stepActionButtonTitle="Next";isc.A.firstStepActionButtonTitle="Let's go!";isc.A.lastStepActionButtonTitle="Done";isc.A.stepCancelButtonTitle="Skip this tour";isc.A.firstStepCancelButtonTitle="Skip this tour";isc.A.outlineBorder="1px solid red";isc.A.dropOutlineBorder="1px solid #44ff44";isc.A.wizard=true;isc.A.notifyType="tourExpectedValue";isc.A.notifyMessageDefaults={multiMessageMode:"replace"};isc.B.push(isc.A.instantiateElements=function isc_Tour_instantiateElements(){if(!isc.DrawPane){this.logWarn("Tour requires the Drawing optional module that is not loaded. Tour cannot be started.");return this.Super("instantiateElements",arguments)}
var _1=this.steps;this.stepCount=this.$226f(_1);if(_1){this.sequences=[{elements:_1}]}
var _1=this.cancelSteps;if(_1){if(_1[0])_1[0].firstStep=true;if(_1[_1.length-1])_1[_1.length-1].lastStep=true;if(this.sequences){this.sequences.add({ID:"$223u",elements:_1})}else{this.sequences=[{ID:"$223u",elements:_1}]}
this.cancelElement="$223u"}
return this.Super("instantiateElements",arguments)},isc.A.traceElement=function isc_Tour_traceElement(_1,_2){if(!_1)return;if(_1.stepNum!=null){this.currentStepNum=_1.stepNum;this.setStateVariable("currentStepNum",this.currentStepNum)}},isc.A.evalTargetAgainstState=function isc_Tour_evalTargetAgainstState(_1){return _1.evalDynamicString(this,this.state)},isc.A.$226f=function isc_Tour__preprocessSteps(_1){if(!_1)return 0;var _2=0,_3,_4;for(var i=0;i<_1.length;i++){if(isc.isAn.Object(_1[i])&&!isc.isAn.Instance(_1[i])){_1[i]=isc.TourStep.create(_1[i])}
if(isc.isA.TourStep(_1[i])||isc.isA.TourConfirmStep(_1[i])){var _6=_1[i];_6.stepNum=++_2;if(!_3){_6.firstStep=_3=true}
_4=_6}}
if(_4)_4.lastStep=true;return _2},isc.A.handleFinished=function isc_Tour_handleFinished(){this.Super("handleFinished",arguments);if(this.autoReset){this.reset()}
if(this.$208x){for(var i=0;i<this.$208x.length;i++){var _2=this.$208x[i];_2.top.destroy();_2.left.destroy();_2.bottom.destroy();_2.right.destroy()}
this.$208x=null}},isc.A.notifyValidationMessage=function isc_Tour_notifyValidationMessage(_1){var _2=this.notifyType;if(!this.$224v){if(!isc.Tour.$226i)isc.Tour.$226i={};if(isc.Tour.$226i[_2]||!isc.Notify.typeState[_2]){var _3=isc.addProperties({},this.notifyMessageDefaults,this.notifyMessageSettings);isc.Notify.configureMessages(_2,_3);isc.Tour.$226i[_2]=true}
this.$224v=true}
var _4=isc.Notify.typeState[_2],_5=_4&&_4.liveMessages,_6=_5&&_5.length>0?_5.last():null;if(_6&&_6.contents==_1)return;isc.Notify.addMessage(_1,null,_2)},isc.A.outline=function isc_Tour_outline(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];var _3=[];for(var i=0;i<_1.length;i++){var _5=_1[i];var _6=isc.AutoTest.getObject(_5);if(!isc.isA.Canvas(_6)&&!isc.isA.FormItem(_6)){this.logInfo("Cannot hilite "+_6+" - it is neither a Canvas nor a FormItem","tour");return}
_3.add(_6)}
this.$208u(_3,_2);this.$208v=[];this.$208w=[];for(var i=0;i<_3.length;i++){var _6=_3[i],_7=_6;if(isc.isA.FormItem(_6)){var _8=isc.AutoTest.getFormItemIcon(_5);_7=isc.FormItemOutlineProxyCanvas.create();_7.delayCall("setFormItem",[_6,_8]);if(_8){this.logDebug("outline FormItemIcon "+_6.form.ID+"."+_6.ID+" "+_8,"tour")}else{this.logDebug("outline FormItem "+_6.form.ID+"."+_6.ID,"tour")}}else if(isc.isA.ListGrid(_6)||isc.isA.GridRenderer(_6)){if(isc.isA.GridRenderer(_6))_6=_6.grid;var _9=isc.AutoTest.getRecord(_1[i]),_10=isc.AutoTest.getField(_1[i]);if(_9){_7=isc.GridRecordOutlineProxyCanvas.create();_7.setRecord(_6,_9,_10);if(_10){this.logDebug("outline ListGridField "+_6.ID+"."+_10.textContent+" @ record "+_6.getRecordIndex(_9),"tour")}else{this.logDebug("outline ListGrid "+_6.ID+" @ record "+_6.getRecordIndex(_9),"tour")}}else{this.logDebug("outline ListGrid "+_6.ID,"tour")}}else{this.logDebug("outline Canvas "+_6.ID,"tour")}
this.$208v[i]=_6;this.$208w[i]=_7}
this.delayCall("$70h",[],0);this.delayCall("showOutline",[],0);var _11=this;for(var i=0;i<_3.length;i++){var _6=_3[i],_7=this.$208w[i];var _12=_6;if(isc.isA.FormItem(_12))_12=_12.containerWidget;if(_12.scrolled){this.$f0.observe(_12,"scrolled",function(){_11.delayCall("$70h")});this.$f0.observe(_12,"parentScrolled",function(){_11.delayCall("$70h")})}
if(_7.moved){this.$f0.observe(_7,"moved",function(){_11.delayCall("$70h")})}
if(_7.$807){this.$f0.observe(_7,"$807",function(){_11.delayCall("visibilityChanged")})}
var _13=_6.getTopLevelCanvas&&_6.getTopLevelCanvas();if(_13&&!this.$f0.$tw.contains(_13)){this.$f0.$tw.add(_13);this.$f0.observe(_13,"zIndexChanged",function(){_11.delayCall("$226j")})}}},isc.A.clearOutline=function isc_Tour_clearOutline(){this.hideOutline();if(this.$f0&&this.$208v){var _1=this.$f0.$tw;for(var i=0;i<_1.length;i++){var _3=_1[i];this.$f0.ignore(_3,"zIndexChanged")}
this.$f0.$tw=[];for(var i=0;i<this.$208v.length;i++){var _4=this.$208v[i],_5=this.$208w[i];this.$f0.ignore(_4,"moved");var _6=_4;if(isc.isA.FormItem(_6))_6=_6.containerWidget;if(_6.scrolled){this.$f0.ignore(_6,"scrolled");this.$f0.ignore(_6,"parentScrolled")}
this.$f0.ignore(_5,"$807");if(_5.isOutlineProxyCanvas){_5.hide();_5.destroy()}}}
this.$208v=null;this.$208w=null},isc.A.getOutlineCanvas=function isc_Tour_getOutlineCanvas(_1){var _2=isc.AutoTest.getObject(_1),_3=isc.isA.ListGrid(_5)&&isc.AutoTest.getRecord(_1);for(var i=0;i<this.$208v.length;i++){var _5=this.$208v[i],_6=this.$208w[i];if(_5==_2){if(!_3||(_6.getRecord&&_6.getRecord()==_3))
{return _6}}}},isc.A.$208u=function isc_Tour__createOutlines(_1,_2){if(this.$208x&&this.$208x.length>=_1.length){for(var i=this.$208x.length-1;i>=_1.length;i--){var _4=this.$208x[i];if(i>=_1.length){_4.top.destroy();_4.left.destroy();_4.bottom.destroy();_4.right.destroy()}else if(i>0){var _5=(_2?this.dropOutlineBorder:this.outlineBorder);_4.top.setBorder(_5);_4.left.setBorder(_5);_4.bottom.setBorder(_5);_4.right.setBorder(_5)}}
this.$208x.length=_1.length;return}
if(!this.$208x)this.$208x=[];var _6={autoDraw:false,overflow:"hidden",border:this.outlineBorder,padding:0};for(var i=0;i<_1.length;i++){if(this.$208x[i])continue;if(_2&&i>0){_6.border=this.dropOutlineBorder}
this.$208x[i]={top:isc.Canvas.create(isc.addProperties(_6,{snapTo:"T",snapEdge:"B",width:"100%",height:2,canDragResize:false,resizeFrom:["T"]})),left:isc.Canvas.create(isc.addProperties(_6,{snapTo:"L",snapEdge:"R",width:2,height:"100%",canDragResize:false,resizeFrom:["L"]})),bottom:isc.Canvas.create(isc.addProperties(_6,{snapTo:"B",snapEdge:"T",width:"100%",height:2,canDragResize:false,resizeFrom:["B"]})),right:isc.Canvas.create(isc.addProperties(_6,{snapTo:"R",snapEdge:"L",width:2,height:"100%",canDragResize:false,resizeFrom:["R"]}))}}
if(!this.$f0)this.$f0=isc.Class.create({$tw:[]})},isc.A.$71o=function isc_Tour__resizeOutline(){this.$71p();this.resizeStop()},isc.A.$70h=function isc_Tour__moveOutline(){this.$71p()},isc.A.$226j=function isc_Tour__updateOutlineZIndex(){this.$71p();var _1=this.steps[this.currentStepNum];var _2=_1&&_1.getArrow&&_1.getArrow();if(_2)_2.bringToFront()
if(_1&&_1.targetView)_1.targetView.bringToFront()},isc.A.$71p=function isc_Tour__refreshOutline(){if(!this.$208v)return;for(var i=0;i<this.$208x.length;i++){var _2=this.$208x[i],_3=this.$208v[i];if(!_3||_3.destroyed||_3.destroying)continue;var _4=_3;_3=this.$208w[i];var _5=this.$220v(_3);if(_5){var _6=_5[2],_7=_5[3];_2.top.resizeTo(_6,_2.top.height);_2.bottom.resizeTo(_6,_2.bottom.height);_2.left.resizeTo(_2.left.width,_7);_2.right.resizeTo(_2.right.width,_7);var _8=isc.isA.Canvas(_3);var _9=_4.getTopLevelCanvas&&_4.getTopLevelCanvas();for(var _10 in _2){var _11=_2[_10];if(_10=="$2201"||_11==null)continue;if(_8){_11.show();isc.Canvas.snapToEdge(_5,_11.snapTo,_11,_11.snapEdge)}else{isc.Canvas.snapToEdge(_3.getPageRect(),_11.snapTo,_11,_11.snapEdge)}
if(_9){_11.moveAbove(_9)}}
delete _2.$2201}else{_2.$2201=true;this.hideOutline()}}},isc.A.$220v=function isc_Tour__getObjectOutlineRect(_1){var _2=this.clipCanvas,_3;if(_1&&_2){var _4=_2.getPageRect(),_5=_1.getPageRect(),_6=Math.max(_4[0],_5[0]),_7=Math.max(_4[1],_5[1]);if(_5[0]+_5[2]>=0&&_5[1]+_5[3]>=0&&_7<_4[1]+_4[3]&&_6<_4[0]+_4[2])
{_3=[_6,_7,Math.min(_4[0]+_4[2],_5[0]+_5[2])-_6,Math.min(_4[1]+_4[3],_5[1]+_5[3])-_7]}
if(_3&&(_3[2]<1||_3[3]<1)){_3=null}}else{_3=_1.getPageRect()}
return _3},isc.A.hideOutline=function isc_Tour_hideOutline(){if(!this.$208x)return;for(var i=0;i<this.$208x.length;i++){var _2=this.$208x[i];for(var _3 in _2){if(_3!="$2201"&&_2[_3])_2[_3].hide()}}
this.$70z=false},isc.A.showOutline=function isc_Tour_showOutline(){if(!this.$208x)return;var _1=false;for(var i=0;i<this.$208x.length;i++){var _3=this.$208x[i];for(var _4 in _3){if(_4!="$2201"&&_3[_4]){if(_3.$2201){_3[_4].hide()}else{_3[_4].show();_1=true}}}}
this.$70z=_1},isc.A.visibilityChanged=function isc_Tour_visibilityChanged(){if(!this.$208v)return;for(var i=0;i<this.$208w.length;i++){var _2=this.$208w[i];if(_2.isVisible()){delete this.$208x[i].$2201}else{this.$208x[i].$2201=true}}
this.showOutline()});isc.B._maxIndex=isc.C+18;isc.defineClass("Tutorial","Tour");isc.A=isc.Tutorial.getPrototype();isc.A.mode="tutorial";isc.ClassFactory.defineClass("FormItemOutlineProxyCanvas","Canvas");isc.A=isc.FormItemOutlineProxyCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.isOutlineProxyCanvas=true;isc.B.push(isc.A.setFormItem=function isc_FormItemOutlineProxyCanvas_setFormItem(_1,_2){var _3=this.formItem;this.formItem=_1;this.formItemIcon=_2;this.syncWithFormItemPosition();this.sendToBack();this.show();if(_1!=_3){if(_3&&this.isObserving(_3,"visibilityChanged")){this.ignore(_3,"visibilityChanged")}
if(_3&&this.isObserving(_3,"moved")){this.ignore(_3,"moved")}
if(_3&&_3.containerWidget&&this.isObserving(_3.containerWidget,"scrolled"))
{this.ignore(_3.containerWidget,"scrolled")}
if(_3&&_3.containerWidget&&this.isObserving(_3.containerWidget,"parentScrolled"))
{this.ignore(_3.containerWidget,"parentScrolled")}
if(!this.isObserving(this.formItem,"visibilityChanged")){this.observe(this.formItem,"visibilityChanged","observer.formItemVisibilityChanged()")}
if(!this.isObserving(this.formItem,"moved")){this.observe(this.formItem,"moved","observer.formItemMoved()")}
if(this.formItem.containerWidget&&!this.isObserving(this.formItem.containerWidget,"scrolled"))
{this.observe(this.formItem.containerWidget,"scrolled","observer.formItemMoved()")}
if(this.formItem.containerWidget&&!this.isObserving(this.formItem.containerWidget,"parentScrolled"))
{this.observe(this.formItem.containerWidget,"parentScrolled","observer.formItemMoved()")}}},isc.A.destroy=function isc_FormItemOutlineProxyCanvas_destroy(){if(this.formItem&&this.isObserving(this.formItem,"visibilityChanged")){this.ignore(this.formItem,"visibilityChanged")}
if(this.formItem&&this.isObserving(this.formItem,"moved")){this.ignore(this.formItem,"moved")}
if(this.formItem&&this.formItem.containerWidget&&this.isObserving(this.formItem.containerWidget,"scrolled"))
{this.ignore(this.formItem,"scrolled")}
if(this.formItem&&this.formItem.containerWidget&&this.isObserving(this.formItem.containerWidget,"parentScrolled"))
{this.ignore(this.formItem.containerWidget,"parentScrolled")}
this.Super("destroy",arguments)},isc.A.syncWithFormItemPosition=function isc_FormItemOutlineProxyCanvas_syncWithFormItemPosition(){if(!this.formItem||!this.formItem.form)return;this.setPageLeft(this.$227r());this.setPageTop(this.$227s());this.setWidth(this.$227t()||10);this.setHeight(this.$227u()||10)},isc.A.formItemVisibilityChanged=function isc_FormItemOutlineProxyCanvas_formItemVisibilityChanged(){if(this.formItem.isVisible())this.show();else this.hide()},isc.A.formItemMoved=function isc_FormItemOutlineProxyCanvas_formItemMoved(){this.syncWithFormItemPosition()},isc.A.$227r=function isc_FormItemOutlineProxyCanvas__getPageLeft(){var _1=this.formItem,_2=this.formItemIcon;return(_2?_1.containerWidget.getPageLeft()+_1.getIconLeft(_2):_1.getPageLeft())},isc.A.$227s=function isc_FormItemOutlineProxyCanvas__getPageTop(){var _1=this.formItem,_2=this.formItemIcon;return(_2?_1.containerWidget.getPageTop()+_1.getIconTop(_2):_1.getPageTop())},isc.A.$227t=function isc_FormItemOutlineProxyCanvas__getVisibleWidth(){var _1=this.formItem,_2=this.formItemIcon;return(_2?_1.getIconWidth(_2):_1.getVisibleWidth())},isc.A.$227u=function isc_FormItemOutlineProxyCanvas__getVisibleHeight(){var _1=this.formItem,_2=this.formItemIcon;return(_2?_1.getIconHeight(_2):_1.getVisibleHeight())});isc.B._maxIndex=isc.C+9;isc.ClassFactory.defineClass("GridRecordOutlineProxyCanvas","Canvas");isc.A=isc.GridRecordOutlineProxyCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.isOutlineProxyCanvas=true;isc.B.push(isc.A.setRecord=function isc_GridRecordOutlineProxyCanvas_setRecord(_1,_2,_3){this.grid=_1;this.record=_2;this.field=_3;this.syncPosition();this.sendToBack();this.show();this.observe(this.grid,"scrolled","observer.gridScrolled()");this.observe(this.grid,"dataChanged","observer.gridDataChanged()")},isc.A.getRecord=function isc_GridRecordOutlineProxyCanvas_getRecord(){return this.record},isc.A.getField=function isc_GridRecordOutlineProxyCanvas_getField(){return this.field},isc.A.destroy=function isc_GridRecordOutlineProxyCanvas_destroy(){if(this.grid&&this.isObserving(this.grid,"scrolled")){this.ignore(this.grid,"scrolled")}
if(this.grid&&this.isObserving(this.grid,"dataChanged")){this.ignore(this.grid,"dataChanged")}
this.Super("destroy",arguments)},isc.A.syncPosition=function isc_GridRecordOutlineProxyCanvas_syncPosition(){if(!this.record||!this.grid)return;var _1=this.grid,_2=_1.getRowNum(this.record),_3=_1.getVisibleRows(),_4=false;if(isc.isA.Menu(_1)||(_3[0]<=_2&&_2<=_3[1])){var _5=_1.getPageLeft();var _6=this.field?_1.getFieldNum(this.field):-1;if(_6!=-1){_5+=this.$227v(_6)}
this.setPageLeft(_5);this.setPageTop(_1.getRowPageTop(_2));var _7=this.field==null?_1.getInnerWidth():this.$227w(_6);this.setWidth(_7||10);this.setHeight(_1.getDrawnRowHeight(_2)||10);this.recordWidth=this.field?_7:this.$224m(_1,_2);_4=true}
return _4},isc.A.gridScrolled=function isc_GridRecordOutlineProxyCanvas_gridScrolled(){if(this.destroyed||this.destroying)return;var _1=this.syncPosition();if(_1){this.sendToBack();this.show()}else{this.hide()}},isc.A.gridDataChanged=function isc_GridRecordOutlineProxyCanvas_gridDataChanged(){if(this.destroyed||this.destroying)return;var _1=this.syncPosition();if(_1){this.sendToBack();this.show()}else{this.hide()}},isc.A.$227v=function isc_GridRecordOutlineProxyCanvas__getColumnLeft(_1){var _2=this.grid,_3=_2.getFieldBody(_1),_4=_2.getLocalFieldNum(_1),_5=_3.getColumnSizes();if(_3.isRTL()){return _3.getViewportWidth()-_5.sum(0,_4+1)}else{return _5.sum(0,_4)}},isc.A.$227w=function isc_GridRecordOutlineProxyCanvas__getColumnWidth(_1){var _2=this.grid,_3=_2.getFieldBody(_1),_4=_2.getLocalFieldNum(_1),_5=_3.getColumnSizes();return _5[_4]},isc.A.$224m=function isc_GridRecordOutlineProxyCanvas__getPopulatedRecordWidth(_1,_2){if(_2<0)return _1.body.getInnerWidth();var _3=_1.getCurrentFieldWidths(),_4=_1.getRecord(_2),_5=0,_6=0,_7;for(var i=0;i<_3.length;i++){var _9=_3[i]||0,_10=_1.getField(i),_11=_1.getCellValue(_4,_2,i);if(!_10.isRemoveField&&_11!=null&&_11!=""){_6=_5;_7=i}
_5+=_9}
if(_7!=null){_6+=_1.body.getColumnAutoSize(_7,_2,_2+1)}
return _6});isc.B._maxIndex=isc.C+10;isc.defineClass("TourStep","UserTask");isc.A=isc.TourStep;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.stepPropertiesForTourWindow=["showPointer","showCancelButton","cancelButtonTitle","showActionButton","actionButtonTitle"];isc.A.stepPropertiesForTourWindowPointerSettings={"pointerSnapTo":"snapTo","targetOffsetInto":"targetOffsetInto"};isc.B.push(isc.A.applyTourStepProperties=function isc_c_TourStep_applyTourStepProperties(_1,_2){var _3=this.stepPropertiesForTourWindow;if(!_1)_1={};for(var i=0;i<_3.length;i++){var _5=_3[i];if(_2[_5]!=null){_1[_5]=_2[_5]}}
if(this.stepPropertiesForTourWindowPointerSettings){if(!_1.pointerSettings)_1.pointerSettings={};var _6=this.stepPropertiesForTourWindowPointerSettings,_7=_1.pointerSettings;for(var _8 in _6){if(_2[_8]!=null){_7[_6[_8]]=_2[_8]}}}
return _1});isc.B._maxIndex=isc.C+1;isc.A=isc.TourStep.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.targetOffsetInto=6;isc.A.targetViewConstructor="TourWindow";isc.A.targetViewDefaults={actionClick:function(){this.nextStep()},nextStep:function(){var _1=this.userTask,_2=_1.$197f;if(_2==null){return}
var _3=this;this.tourStep.waitForTargetsDone(function(){var _4=_1.targets,_5=_3.$226d();if(_5!=null){_2.setStateVariable("lastEnteredText",_5);if(_1.bindEnteredText){var _6=_1.bindEnteredText;if(_6.startsWith("$"))_6=_6.substring(1);this.setStateVariable(_6,_5)}}
var _7=_5;if(_2.state&&_2.state.VB){_7=_2.state.VB.lastAdded}else if(_4&&!_5){var _8=_4[0],_9=_8.locator;if(isc.AutoTest.isRecordLocator(_9)){_7=isc.AutoTest.getRecord(_9)}else{_7=isc.AutoTest.getObject(_9)}}
_2.setTaskOutput(_1,_7);_1.completeEditing()})},cancelStep:function(_1){var _2=this.userTask,_3=_2.$197f,_4=this;if(_3==null){return}
this.tourStep.waitForTargetsDone(function(){_4.$226d();_3.setStateVariable(_1,true);if(_3.cancelElement){_2.cancelElement=_3.cancelElement;delete _3.showProgress}
_2.cancelEditing()})},cancelClick:function(){this.cancelStep("canceled")},closeClick:function(){this.cancelStep("closed")},$226d:function(){var _1=this.userTask,_2=_1.targets,_3;_1.hideMasks();if(_2){for(var i=0;i<_2.length;i++){var _5=_2[i],_6=_5.type;if(_6=="change"){_3=_1.$224z(_5)}else if(_6=="menuItemSelect"||_6=="menuItemOpen"){_1.$2292(_5)}}}
return _3}};isc.A.inputValidationNotifyMessage="Please enter '${expectedValue}'";isc.A.waitForDoneTimeout=3000;isc.A.waitForDoneRetryTime=200;isc.A.$2233={0:{arrow:[0,"centerY"],window:["width","centerY"],extraLeft:-20},45:{arrow:[0,0],window:["width","height"]},90:{arrow:["centerX",0],window:["centerX","height"],extraTop:-20},135:{arrow:["width",0],window:[0,"height"]},180:{arrow:["width","centerY"],window:[0,"centerY"],extraLeft:20},225:{arrow:["width","height"],window:[0,0]},270:{arrow:["centerX","height"],window:["centerX",0],extraTop:20},315:{arrow:[0,"height"],window:["width",0]}};isc.A.waitForReadyTimeout=5000;isc.A.autoComplete=true;isc.A.$230v={drag:["mouseOver","mouseOut","mouseMove","mouseDown","mouseUp","dragStart","dragMove","dragStop","setDragTracker","touchStart","touchMove","touchEnd"],drop:["mouseOver","mouseOut","mouseMove","mouseUp","dragStop","dropOver","dropOut","dropMove","drop","touchMove","touchEnd"],click:["mouseOver","mouseOut","mouseMove","mouseDown","mouseUp","click","touchStart","touchMove","touchEnd"],mouseDown:["mouseOver","mouseOut","mouseMove","mouseDown","mouseUp","click","touchStart","touchMove","touchEnd"],doubleClick:["mouseOver","mouseOut","mouseMove","mouseDown","mouseUp","click","doubleClick","touchStart","touchMove","touchEnd"],rightClick:["mouseOver","mouseOut","mouseMove","mouseDown","mouseUp","showContextMenu","rightMouseDown","touchStart","touchMove","touchEnd"],mouseOver:["mouseOver","mouseOut","mouseMove"],menuItemOpen:["mouseOver","mouseOut","mouseMove","mouseDown","mouseUp","click","touchStart","touchMove","touchEnd"],menuItemSelect:["mouseOver","mouseOut","mouseMove","mouseDown","mouseUp","click","touchStart","touchMove","touchEnd"]};isc.A.$230z={};isc.A.$224w=500;isc.A.arrowDefaults={_constructor:isc.DrawPane,autoDraw:false,shadowPadding:10,leftOffset:10,topOffset:10,width:140+(10*2),height:70+(10*2),length:142,breadth:72,rotate:function(_1){this.Super("rotate",arguments);var _2=this.drawItems[0],_3=_2.getResizeBoundingBox(),_4=Math.round(_3[2]-_3[0]),_5=Math.round(_3[3]-_3[1]),_6=this.shadowPadding*2;_2.moveTo(this.leftOffset,this.topOffset);this.resizeTo(_4+_6,_5+_6)}};isc.A.arrowItemDefaults={_constructor:isc.DrawPolygon,autoDraw:false,points:[[0,17],[80,17],[80,0],[140,35],[80,70],[80,53],[0,53],[0,17]],fillColor:"red",lineWidth:2,lineColor:"white",shadow:{blur:20,color:"#7f7f7f",offset:[5,5]}};isc.B.push(isc.A.executeElement=function isc_TourStep_executeElement(_1){this.$224n=_1;if(!this.ID)this.ID="tourStep"+this.stepNum;var _2=this,_3=this.targets=this.resolveTargets(),_4=_1.mode||"tour";if(_4=="tour"){if(this.showPointer==null&&this.showArrow==null&&_3&&_3.length>0){this.showPointer=true}}else{if(this.showOutline==null){this.showOutline=true}}
this.waitForTargetsReady(_3,function(_3){if(_3){if(!_2.validateTargets(_3)){this.logWarn("Tour canceled because no valid targets found for step");_1.setNextElement(null);return}
_2.createTargetView(_3);if(_2.autoComplete!=false&&(_3[0].type=="click"||_3[0].type=="doubleClick"||_3[0].type=="rightClick"||_3[0].type=="menuItemSelect"||_3[0].type=="mouseDown"||_3[0].type=="menuItemOpen"||(_3[0].type=="change"&&_2.expectedValue)||_3.containsProperty("type","drop"))&&_2.showActionButton==null)
{_2.targetView.setShowActionButton(false)}
if(_2.showOutline){_2.outlineTargets(_3)}
if(!_2.showPointer){_2.placeArrow(_3);_2.positionWindow(_3)}
_2.setupStepCompleteNotification(_3)}else{_2.createTargetView(_3)}
_2.maskTargets(_3);_2.Super("executeElement",[_1])});return false},isc.A.completeElement=function isc_TourStep_completeElement(_1){this.targetView.markForDestroy();this.removeOutlines();this.destroyArrow();var _2=this.targets;if(_2){for(var i=0;i<_2.length;i++){var _4=_2[i];if(_4.$it!=null){isc.Page.ignoreTargetEvent(_4.$2242,_4.$224g,_4.$it)}}}},isc.A.waitForTargetsDone=function isc_TourStep_waitForTargetsDone(_1){if(!this.$224x)this.$224x=isc.timeStamp();var _2=this.targets;if(_2){for(var i=0;i<_2.length;i++){var _4=_2[i],_5=_4.locator,_6=isc.AutoTest.getObject(_5);if(_6){if(this.$2248(_6)||(isc.isA.FormItem(_6)&&!isc.AutoTest.isItemDone(_6))||(_6.$124j&&!_6.$124j()))
{var _7=isc.timeStamp();if(_7-this.$224x>this.waitForDoneTimeout){this.logWarn("Timed out waiting for target component to be done: "+_6)}else{this.delayCall("waitForTargetsDone",arguments,this.waitForDoneRetryTime);return}}}}}
if(!isc.AutoTest.isSystemDone()){var _7=isc.timeStamp();if(_7-this.$224x>this.waitForDoneTimeout){var _8=isc.Log.getPriority("quiescence");isc.Log.setPriority("quiescence",isc.Log.DEBUG);try{isc.AutoTest.clearAllLogSlots();if(!isc.AutoTest.isSystemDone()){var _9=isc.AutoTest.getLogFailureText();this.logWarn("Timed out waiting for page to quiet: "+_9)}}finally{if(_8!=null)isc.Log.setPriority("quiescence",_8);else isc.Log.clearPriority("quiescence",_8)}}else{this.delayCall("waitForTargetsDone",arguments,this.waitForDoneRetryTime);return}}
delete this.$224x;if(_1)this.fireCallback(_1)},isc.A.$2248=function isc_TourStep__hasPendingActionsOnPause(_1){var _2=_1.getClass().$cn,_3=_1.getClassName(),_4=false;if(_2&&!isc.isAn.emptyObject(_2)){for(var _5 in _2){var _6=_2[_5];if(_6[_1.ID]){_4=true;break}}}
return _4},isc.A.createTargetView=function isc_TourStep_createTargetView(_1){var _2=this.$224n,_3=_2.state,_4=this.title,_5=this.instructions||this.contents,_6=_2.stepActionButtonTitle||"Next",_7=_2.stepCancelButtonTitle||"Skip this tour";if(this.lastStep){_6=_2.lastStepActionButtonTitle||"Done"}else if(this.firstStep){_6=_2.firstStepActionButtonTitle||"Let's go!";_7=_2.firstStepCancelButtonTitle||_7}
var _8={tourStep:this,title:(_4?_4.evalDynamicString(this,_3):null),contents:(_5?_5.evalDynamicString(this,_3):null),actionButtonTitle:_6,showCancelButton:!this.lastStep,cancelButtonTitle:_7};if(_2.showProgress){var _9=Math.round((this.stepNum-1)/_2.stepCount*100.0);isc.addProperties(_8,{showProgress:true,percentDone:_9,showProgressPercent:_2.showProgressPercent,showProgressPercentInline:_2.showProgressPercentInline})}
if(_2.windowDefaults){isc.addProperties(_8,_2.windowDefaults)}
if(this.windowDefaults){isc.addProperties(_8,this.windowDefaults)}
isc.TourStep.applyTourStepProperties(_8,this);if(this.showPointer&&!_8.pointerTarget){_8.pointerTarget=_1[0].locator;if(_8.pointerTarget&&this.actionType!=null&&this.actionType!="none"){if(!_8.pointerSettings)_8.pointerSettings={};isc.addProperties(_8.pointerSettings,{hideApexShadow:true,targetOffsetInto:0})}}
this.targetView=this.createAutoChild("targetView",_8);this.targetView.bringToFront()},isc.A.positionWindow=function isc_TourStep_positionWindow(_1){if(!_1||_1.length==0||this.showPointer)return;this.targetView.autoCenter=false;this.targetView.setTop(-9999);this.targetView.draw();this.targetView.hide();var _2=_1.map(function(_5){return isc.AutoTest.getObject(_5.locator)});if(_2.length>1&&!_1.find("type","textClick")){this.$224o(_1,_2)}else if(_1[0].type=="drag"){this.targetView.centerInPage()}else{var _3=_2[0],_4=_1[0].locator;this.$2234(_3,_4)}},isc.A.$224o=function isc_TourStep__positionWindowBetweenTargets(_1,_2){var _3=isc.Page.getWidth(),_4=isc.Page.getHeight(),_5=this.getArrow(),_6=_5.left+_5.leftOffset,_7=_5.top+_5.topOffset,_8=_5.getVisibleWidth()-_5.shadowPadding*2,_9=_5.getVisibleHeight()-_5.shadowPadding*2,_10=_6+_8,_11=_7+_9,_12=_5.getCenter(),_13=_5.rotation,_14=(_13%90)!=0,_15=this.targetView,_16=_15.getVisibleWidth(),_17=_15.getVisibleHeight(),_18,_19;var _20=0,_21=0,_22=0;if((135<=_13&&_13<=225)||45>=_13||_13>=315){_21=(_7>(_4-_11)?-1:1);if((_21<0&&(135<=_13&&_13<=225))||(_21>0&&(315<=_13||_13<=45)))
{_22=180}}else{_20=(_6>(_3-_10)?-1:1);if((_20<0&&(45<=_13&&_13<=135))||(_20>0&&(225<=_13&&_13<=315)))
{_22=180}}
var _23=40,_24=(_13+_22)%360,_25=(_24>=90?_24-90:360+_24-90),_26=_25*Math.PI/180,_27=Math.round(_12[0]+(_23*Math.cos(_26))),_28=Math.round(_12[1]+(_23*Math.sin(_26)));if(_14){for(var i=0;i<2;i++){if(0<_25&&_25<90){_18=_27;_19=_28;if(_18+_16>_3-20){_18-=(_18+_16-_3+20);if(_19<_11)_19=_11+10}}else if(90<_25&&_25<180){_18=_27-_16;_19=_28;if(_18<20){_18=20;if(_19<_11)_19=_11+10}}else if(180<_25&&_25<270){_18=_27-_16;_19=_28-_17;if(_19<20){_19=20;if(_18+_16>_6)_18=_6-10-_16}}else{_18=_27;_19=_28-_17;if(_19<20){_19=20;if(_18<_10)_18=_10+10}}
var _30=((_18>=0&&_18+_16<=_3)&&(_19>=0&&_19+_17<=_4));if(_30)break;_22=(_22+180)%360;_24=(_13+_22)%360;_25=(_24>=90?_24-90:360+_24-90);_26=_25*Math.PI/180;_27=Math.round(_12[0]+(_23*Math.cos(_26)));_28=Math.round(_12[1]+(_23*Math.sin(_26)))}}else{_18=(_25==0?_27:_25==90?_27-_16/2:_25==180?_27-_16:_27-_16/2);_19=(_25==0?_28-_17/2:_25==90?_28:_25==180?_28-_17/2:_28-_17);if(_18<20)_18=20;else if(_18+_16>_3-20)_18=_3-20-_16;if(_19<20)_19=20;else if(_19>_4-20)_19=_4-20-_17;var _31=_2[1],_32=_1[1].locator,_33=this.$2239(_32,_31,this.dropQuadrant);if(isc.Canvas.rectsIntersect(_33,[_18,_19,_16,_17])){if(_25==0||_25==180){if(_13==90)_19=_33[1]-_17-5;else _19=_33[1]+_33[3]+5}else if(_25==90||_25==270){if(_13==0)_18=_33[0]-_16-5;else _18=_33[0]+_33[2]+5}}}
_15.moveTo(_18,_19)},isc.A.$224p=function isc_TourStep__getTargetModalWindow(_1){if(!_1||(!_1.getParentElements&&!_1.form))return null;var _2=(_1.form||_1).getParentElements();if(_2&&_2.length>0){var _3=_2[_2.length-1];if(isc.isA.Window(_3)&&_3.isModal)return _3}},isc.A.$2234=function isc_TourStep__positionWindowAtSource(_1,_2){var _3=isc.Page.getWidth(),_4=isc.Page.getHeight(),_5=this.getArrow(),_6=_5.left+_5.leftOffset,_7=_5.top+_5.topOffset,_8=_5.getVisibleWidth()-_5.shadowPadding*2,_9=_5.getVisibleHeight()-_5.shadowPadding*2,_10=_6+_8,_11=_7+_9,_12=_5.rotation,_13=this.targetView,_14=_13.getVisibleWidth(),_15=_13.getVisibleHeight(),_16,_17;var _18=this.$224p(_1);if(_18&&_18.getVisibleWidth()<(_3/2)&&_18.getVisibleHeight()<(_4/2))
{_1=_18}
var _19=false;if(this.$2235){var _20=_1.getPageLeft(),_21=_1.getPageTop();if(_6>_20){_16=_20-20-_14}else{_16=_20+_1.getVisibleWidth()+20}
_17=_21+_1.getVisibleHeight()/2-_15/2;_19=(_16>=0&&_16+_14<=_3)}
if(!_19){var _22=this.$2233[_12],_23=_22.arrow,_24=function(_73,_14,_15){return(_73=="width"?_14:_73=="height"?_15:_73=="centerX"?_14/2:_73=="centerY"?_15/2:_73)},_25=_24(_23[0],_8,_9),_26=_24(_23[1],_8,_9),_27=_22.window,_28=_24(_27[0],_14,_15),_29=_24(_27[1],_14,_15),_30=(isc.isA.ListGrid(_1)?isc.AutoTest.getRecord(_2):null),_31=this.$2239(_2,_1);var _32=function(_73){var _33=((_73[0]>=0&&_73[0]+_73[2]<=_3)&&(_73[1]>=0&&_73[1]+_73[3]<=_4));var _34=100,_35=((_73[0]<_34&&_73[0]+_73[2]>(_3-_34))&&(_73[1]<_34&&_73[1]+_73[3]>(_4-_34)));var _36=isc.Canvas.rectsIntersect(_31,_73);return(_33&&!_35&&!_36)};_16=_6+_25-_28+(_22.extraLeft||0);_17=_7+_26-_29+(_22.extraTop||0);if(!_32([_16,_17,_14,_15])){var _37=this.$2233[(_12+180)%360],_38=_37.arrow,_39=_24(_38[0],_8,_9),_40=_24(_38[1],_8,_9);var _41=20,_42=_5.breadth/2+_41,_43=(_12%90==0?_41:0),_44=_25-_39,_45=_26-_40,_46=Math.sqrt(_44*_44+_45*_45),_47=_44/_46,_48=_45/_46,_49=[Math.round(_39+_42*_48),Math.round(_39-_42*_48)],_50=[Math.round(_40-_42*_47),Math.round(_40+_42*_47)],x=Math.round(_25+_43*_47),y=Math.round(_26+_43*_48),_53=[Math.round(x+_42*_48),Math.round(x-_42*_48)],_54=[Math.round(y-_42*_47),Math.round(y+_42*_47)],_55=[(_6>(_3-_10)?0:1),(_7>(_4-_11)?0:1)];var _56=this.$2288(_5,_53,_54,_49,_50,_14,_15);if(_56){var _57=(_12%90==0?10:7);var _58=_56.segments,_59;if(_56.swap&&_56.swap[0]&&_56.swap[0][_55[0]]){_59=_56.swap[0][_55[0]]}else if(_56.swap&&_56.swap[1]&&_56.swap[1][_55[1]]){_59=_56.swap[1][_55[1]]}
for(var i=0;i<_58.length&&!_19;i++){var s=(_59==null?i:(i==_59[0]?_59[1]:_59[0])),_62=_58[s];var _63=Math.abs(_62[0][0]-_62[1][0]);if(_63==0){_63=Math.abs(_62[0][1]-_62[1][1])}
var _64=Math.floor(_63/_57);var _65=(_62[0][0]<_62[1][0]?_57:(_62[0][0]>_62[1][0]?-_57:0));var _66=(_62[0][1]<_62[1][1]?_57:(_62[0][1]>_62[1][1]?-_57:0));var _67=_62[0],_68=0,_69=0;for(var j=0;j<_64;j++){var x=_6+_67[0]+_68,y=_7+_67[1]+_69;if(_32([x,y,_14,_15])){_16=x;_17=y;_19=true;break}
_68+=_65;_69+=_66}
if(!_19){var x=_6+_62[1][0],y=_7+_62[1][1];if(_32([x,y,_14,_15])){_16=x;_17=y;_19=true}}}
if(!_19){var _20=_1.getPageLeft(),_21=_1.getPageTop();if(_6>_20){_16=_20-20-_14}else{_16=_20+_1.getVisibleWidth()+20}
_17=_21+_1.getVisibleHeight()/2-_15/2;_19=(_16>=0&&_16+_14<=_3)}
if(!_19){var _71=[[20,20],[_3-20-_14,20],[20,_4-20-_15],[_3-20-_14,_4-20-_15]];for(var i=0;i<_71.length;i++){var _72=_71[i];_16=_72[0];_17=_72[1];if(_32([_16,_17,_14,_15])){_19=true;break}}}
if(!_19){this.logWarn("Unable to place tour window in an acceptable position. Centering on page instead.");_13.centerInPage();return}}}}
_13.moveTo(_16,_17)},isc.A.$2288=function isc_TourStep__getWindowPositionPath(_1,_2,_3,_4,_5,_6,_7){var _8=_1.rotation,_9=_1.length/2,_10;if(_8==0){_10={swap:[null,{0:[0,2]}],segments:[[[_4[0]-_6-_9,_5[0]],[_2[0]-_6,_3[0]]],[[_2[0]-_6,_3[0]],[_2[1]-_6,_3[1]-_7]],[[_4[1]-_6-_9,_5[1]-_7],[_2[1]-_6,_3[1]-_7]]]}}else if(_8==45){_10={segments:[[[_2[0]-_6,_3[0]-_7],[_2[1]-_6,_3[1]-_7]],[[_4[0]-_6-_9,_5[0]-_9],[_2[0]-_6,_3[0]]],[[_4[1]-_9,_5[1]-_7-_9],[_2[1],_3[1]-_7]],[[_2[0]-_6,_3[0]-_7],[_2[0]-_6,_3[0]]],[[_2[1],_3[1]-_7],[_2[1]-_6,_3[1]-_7]]]}}else if(_8==90){_10={swap:[{0:[0,2]},null],segments:[[[_4[1],_5[1]-_7-_9],[_2[1],_3[1]-_7]],[[_2[0]-_6,_3[0]-_7],[_2[1],_3[1]-_7]],[[_4[0]-_6,_5[0]-_7-_9],[_2[0]-_6,_3[0]-_7]]]}}else if(_8==135){_10={segments:[[[_2[1],_3[1]-_7],[_2[0],_3[0]-_7]],[[_4[0]-_6+_9,_5[0]-_7-_9],[_2[0]-_6,_3[0]-_7]],[[_4[1]+_9,_5[1]-_9],[_2[1],_3[1]]],[[_2[1],_3[1]-_7],[_2[1],_3[1]]],[[_2[0],_3[0]-_7],[_2[0]-_6,_3[0]-_7]]]}}else if(_8==180){_10={swap:[null,{0:[0,2]}],segments:[[[_4[1]+_9,_5[1]],[_2[1],_3[1]]],[[_2[1],_3[1]],[_2[1],_3[0]-_7]],[[_4[0]+_9,_5[0]-_7],[_2[0],_3[0]-_7]]]}}else if(_8==225){_10={segments:[[[_2[1],_3[1]],[_2[0],_3[0]]],[[_4[0]+_9,_5[0]-_7+_9],[_2[0],_3[0]-_7]],[[_4[1]-_6+_9,_5[1]+_9],[_2[1]-_6,_3[1]]],[[_2[0],_3[0]],[_2[0],_3[0]-_7]],[[_2[1],_3[1]],[_2[1]-_6,_3[1]]]]}}else if(_8==270){_10={swap:[{0:[0,2]},null],segments:[[[_4[0],_5[0]+_9],[_2[0],_3[0]]],[[_2[1]-_6,_3[1]],[_2[0],_3[0]]],[[_4[1]-_6,_5[1]+_9],[_2[1]-_6,_3[1]]]]}}else if(_8==315){_10={segments:[[[_2[1]-_6,_3[1]],[_2[0]-_6,_3[0]]],[[_4[1]-_6-_9,_5[1]-_7+_9],[_2[1]-_6,_3[1]-_7]],[[_4[0]-_9,_5[0]+_9],[_2[0],_3[0]]],[[_2[0]-_6,_3[0]],[_2[0],_3[0]]],[[_2[1]-_6,_3[1]],[_2[1]-_6,_3[1]-_7]]]}}
return _10},isc.A.getActionType=function isc_TourStep_getActionType(){var _1=this.$224n,_2=_1.mode||"tour",_3=this.actionType;if(!_3){if(_2=="tour"){_3="none"}else{if(this.expectedValue||this.afterInputTarget){_3="change"}else if(this.dropTarget){_3="drag"}else{var _4=isc.AutoTest.getObject(this.target);var _5=_4&&isc.isA.ListGrid(_4)&&isc.isAn.Object(isc.AutoTest.getRecord(this.target));if(!_5){if(isc.isA.Menu(_4)){_3="menuItemSelect"}else{_3="click"}}else{_3="mouseDown"}}}}
return _3},isc.A.resolveTargets=function isc_TourStep_resolveTargets(){if(!this.target)return null;var _1=this.actionType,_2=this.getActionType(),_3=this.target=this.$2236(this.target),_4=(_2=="mouseOver"?"over":(_2=="none"?"outline":_2));var _5=[{locator:_3,type:_4,explicitActionType:_1}];this.logDebug("Resolved target: "+_3+", type: "+_4+", specified actionType: "+_1+", derived actionType: "+_2,"tour");if(this.dropTarget){var _3=this.dropTarget=this.$2236(this.dropTarget);var _6=this.allowDropOnDescendants;if(_6==null){_6=this.$224n.allowDropOnDescendants}
_5.add({locator:_3,type:"drop",allowDescendantEvent:_6});this.logDebug("Resolved drop target: "+_3,"tour")}else if(this.afterInputTarget){var _3=this.afterInputTarget=this.$2236(this.afterInputTarget);_5.add({locator:_3,type:"textClick"});this.logDebug("Resolved after input target: "+_3,"tour")}
return _5},isc.A.waitForTargetsReady=function isc_TourStep_waitForTargetsReady(_1,_2){if(!this.$224q)this.$224q=isc.timeStamp();var _3=[];if(_1){for(var i=0;i<_1.length;i++){var _5=_1[i].locator,_6=isc.AutoTest.getObject(_5);if(!_6||(_6.$124j&&!_6.$124j(_6))||!_6.isDrawn()||!_6.isVisible()||_6.getLeft()<0||_6.getTop()<0)
{_3.add({component:_6,locator:_5});break}
if(isc.isA.ListGrid(_6)){if(!isc.AutoTest.isGridDone(_6)){_3.add({component:_6,locator:_5});break}
if(isc.AutoTest.isRecordLocator(_5)){var _7=isc.AutoTest.getRecord(_5);if(!_7){_3.add({component:_6,locator:_5,record:_7});break}
var _8=_6.getRowNum(_7),_9=_6.getVisibleRows();if(_8<=_9[0]||_9[1]<=_8){_6.scrollToRow(_8)}
if(_1[i].type=="drag"){_6.selectSingleRecord(_7)}}}else{var _10=_6.parentElement||_6.form;if(_10){var _11=_6.getTop(),_12=_11+_6.getVisibleHeight(),_13=_6.getPageTop(),_14=_13+_6.getVisibleHeight(),_15=_10&&_10.getScrollTop(),_16=_15+_10.getScrollHeight();if(_11<_15||_12>_16||_13<0||_14>isc.Page.getHeight())
{_10.scrollTo(0,_11)}}}}}
if(_3.length>0){var _17=isc.timeStamp();if(_17-this.$224q>this.waitForReadyTimeout){var _18=[];for(var i=0;i<_3.length;i++){var _19=_3[i],_6=_19.component,_5=_19.locator,_20=_19.record;if(!_6){_18.add(_5+" could not be resolved")}else if(_6&&!_6.isDrawn()||!_6.isVisible()||_6.getLeft()<0||_6.getTop()<0)
{_18.add(_6+" not ready")}else if(_6&&isc.AutoTest.isRecordLocator(_5)&&!_20){_18.add(_5+" record not found")}}
this.logWarn("Timed out waiting for target component(s) to be ready - tour canceled: "+_18.join("\n"));this.$224n.setNextElement(null);return}
this.delayCall("waitForTargetsReady",arguments,100)}else{delete this.$224q;if(_2)this.fireCallback(_2,"targets",[_1])}},isc.A.validateTargets=function isc_TourStep_validateTargets(_1){var _2=true;if(_1){for(var i=0;i<_1.length;i++){var _4=_1[i],_5=_4.type}}
return _2},isc.A.outlineTargets=function isc_TourStep_outlineTargets(_1){if(!_1||_1.length==0||this.showOutline==false)return;var _2=this;var _3=_1.map(function(_4){if(_4.type=="change"){return _2.normalizeToItemLocator(_4.locator)}
return _4.locator});this.$224n.outline(_3,_1.find("type","drop")!=null)},isc.A.removeOutlines=function isc_TourStep_removeOutlines(){this.$224n.clearOutline()},isc.A.setupStepCompleteNotification=function isc_TourStep_setupStepCompleteNotification(_1){if(_1==null||_1.length==0)return;var _2;for(var i=0;i<_1.length;i++){var _4=_1[i],_5=_4.type;if(_5=="change"){if(_1[i+1]&&_1[i+1].type=="textClick"){_4.afterInputTarget=_1[i+1].locator}
this.$224y(_4);_2=true}else if(_5=="menuItemOpen"||_5=="menuItemSelect"){this.$2293(_4,_5)}else if(_5!="outline"&&_5!="none"){var _6;if(_5=="drag"){if(_1[i+1]&&_1[i+1].type=="drop"){continue}else{_6="dragStop"}}else if(_5=="over"){_6="mouseOver"}else if(_5=="textClick"){_6="click"}else if(_5=="rightClick"){_6="rightMouseDown"}else{_6=_5}
var _7=this.$224e(_1,i);var _8=isc.AutoTest.getElement(_4.locator),_9=_4.$2242=isc.AutoTest.getObject(_4.locator),_10;if(_9.isA(isc.FormItem)){if(isc.isA.CanvasItem(_9)&&_9.canvas!=null){_9=_9.canvas}else{_9=_9.containerWidget}}
if(_8&&_8.getAttribute("eventProxy")){_10=_9}else{_10={isLocator:true,component:_9,locator:_4.locator}}
_4.$it=isc.Page.observeTargetEvent(_10,_6,_7,_4.allowDescendantEvent);_4.$224g=_6;_4.$2242=_9;_2=true}}
if(_2&&this.autoComplete==false){if(!this.targetView.actionButton){if(!this.targetView.actionButtonProperties){this.targetView.actionButtonProperties={}}
isc.addProperties(this.targetView.actionButtonProperties,{disabled:true})}else{this.targetView.actionButton.disable()}}},isc.A.$224e=function isc_TourStep__makeStepActionCompleteFunction(_1,_2){var _3=this;return function stepActionCompleteCallback(){_3.stepActionCompleteNotification(_1,_2)}},isc.A.stepActionCompleteNotification=function isc_TourStep_stepActionCompleteNotification(_1,_2){var _3=_1[_2];if(!this.stepActionComplete(_3)){return}
isc.Page.ignoreTargetEvent(_3.$2242,_3.$224g,_3.$it);var _4=_3.$2242,_5=_3.$224g;if(_4&&this.isObserving(_4,_5)){this.ignore(_4,_5);if(_4.editProxy){this.ignore(_4.editProxy,_5)}}
if(this.isStepComplete(_1,_2)){this.stepComplete()}},isc.A.stepActionComplete=function isc_TourStep_stepActionComplete(_1){return true},isc.A.isStepComplete=function isc_TourStep_isStepComplete(_1,_2){return(_2==_1.length-1)},isc.A.stepComplete=function isc_TourStep_stepComplete(){if(this.autoComplete!=false){this.targetView.nextStep();return}
this.targetView.actionButton.enable()},isc.A.stepIncomplete=function isc_TourStep_stepIncomplete(){if(this.autoComplete==false){this.targetView.actionButton.disable()}},isc.A.maskTargets=function isc_TourStep_maskTargets(_1,_2){if(!_1)_1=[];var _3=[];if(this.$230w!=null&&!_2){isc.logWarn("maskTargets(): this tourStep has already limited events on the target element");_2=true}
if(!_2)this.$230w=[];for(var i=0;i<_1.length;i++){var _5=_1[i],_6=_5.locator,_7=_5.type;var _8=(_7=="drop"&&!_5.allowDescendantEvent)
if(_7=="outline"||_7=="none"||_7=="textClick")continue;if(_7=="change"){_6=this.normalizeToItemLocator(_6)}
var _9=isc.AutoTest.getObject(_6);if(_9&&isc.isA.FormItem(_9))_9=_9.containerWidget;if(_9&&_9.$2322&&_9.grid!=null){_9.grid.suppressHeaderMenuButton=true;this.$2323=_9.grid}
_3.add(_9);if(!_2){var _10=isc.AutoTest.getLocator(_9);if(_10.endsWith("/"))_10=_10.substring(0,_10.length-1);if(_6.endsWith("/"))_6=_6.substring(0,_6.length-1);if(_10!=_6){this.$2300(_9,_6);_8=false}
var _11=this.$230v;if(_11[_7]==null){}else{var _12=_8?["mouseMove","mouseOver","mouseOut"]:null;this.$230w.add([_9.ID,isc.EH.limitComponentEvents(_9,_11[_7],{target:this,methodName:"blockedComponentEvent"},_6,null,_12)])}}}
this.showTourStepClickMask(_3);for(var i=0;i<_1.length;i++){if(_1[i].type!="change")continue;var _6=_1[i].locator;var _13=isc.AutoTest.getObject(_6);if(_13&&_13.focusInItem)_13.focusInItem()}});isc.evalBoundary;isc.B.push(isc.A.$2300=function isc_TourStep__limitEventsOutsideLocator(_1,_2,_3){if(!isc.isA.String(_1))_1=_1.ID;var _4,_5=this.$230z[_1];if(_5!=null){var _6=isc.EH.getLimitedComponentEventRegistration(_1,_5);if(_6.unmaskedTargets!=null){var _4=_6.unmaskedTargets?_6.unmaskedTargets.duplicate():[];if(_3){if(!_4.contains(_2)){return}
_4.remove(_2)}else{if(_4.contains(_2)){return}
_4.add(_2)}}
isc.EH.clearLimitedComponentEvents(_1,_5)}else{if(!_3){_4=[_2]}}
this.$230z[_1]=isc.EH.limitComponentEvents(_1,["mouseOver","mouseOut","mouseMove"],{target:this,methodName:"blockedOutsideLocComponentEvent"},null,_4)},isc.A.blockedOutsideLocComponentEvent=function isc_TourStep_blockedOutsideLocComponentEvent(_1){this.blockedComponentEvent(_1,true)},isc.A.blockedComponentEvent=function isc_TourStep_blockedComponentEvent(_1,_2){if(_1=="mouseUp"||_1=="click"){this.$230x()}},isc.A.showTourStepClickMask=function isc_TourStep_showTourStepClickMask(_1){var _2=[];if(_1){for(var i=0;i<_1.length;i++){var _4=_1[i];if(isc.isA.Canvas(_4)){_2[i]=_4}else{var _5=this.normalizeToComponentLocator(_4);_2[i]=_5}}}
_2.add(this.targetView);var _6=this;this.$2290=isc.EH.showClickMask({clickAction:function(){_6.handleOutsideClick(true)},mode:"softCancel",unmaskedTargets:_2})},isc.A.handleOutsideClick=function isc_TourStep_handleOutsideClick(_1){this.maskTargets(this.resolveTargets(),true);this.$230x()},isc.A.$230x=function isc_TourStep__actionsForOutsideClick(){if(this.getActionType()=="change"&&(this.inputValidation=="onExit"||this.afterInputTarget))
{var _1=isc.AutoTest.getObject(this.target);if(_1==null){this.logWarn("Clicking outside target - unable to find field from locator:"+this.locator)}else{_1.validate(null,{exiting:true})}}else{this.targetView.shake()}},isc.A.hideMasks=function isc_TourStep_hideMasks(){if(this.$230w!=null){for(var i=0;i<this.$230w.length;i++){var _2=this.$230w[i];isc.EH.clearLimitedComponentEvents(_2[0],_2[1])}
delete this.$230w}
for(var _3 in this.$230z){isc.EH.clearLimitedComponentEvents(_3,this.$230z[_3]);delete this.$230z[_3]}
if(this.$230y!=null){var _2=this.$230y;isc.EH.clearLimitedComponentEvents(_2[0],_2[1]);delete this.$230y}
if(this.$2290){isc.EH.hideClickMask(this.$2290);delete this.$2290}
if(this.$2323!=null){delete this.$2323.suppressHeaderMenuButton;delete this.$2323}},isc.A.setAfterInputTargetMask=function isc_TourStep_setAfterInputTargetMask(_1,_2){var _3=_1,_4=isc.AutoTest.getElement(_3),_5=_4==null?null:isc.EH.getEventTargetCanvas(null,_4);if(!_5)return;var _6=false;if(this.$230z){var _7;for(_7 in this.$230z){break}
if(isc.Canvas.getById(_7).contains(_5)){_6=true;this.$2300(_7,_3,!_2)}}
if(!_6){if(_4.getAttribute("eventProxy")==_5.getID()){_3=_5}
if(this.$2290){var _8=isc.EH.$223w(_5,null,_4,this.$2290);if(_8==_2){if(_2){isc.EH.addUnmaskedTarget(_3,this.$2290)}else{isc.EH.maskTarget(_3,this.$2290)}}}}
if(_2){this.$230y=[_5.ID,isc.EH.limitComponentEvents(_5,this.$230v.click,null,_3)]}else{var _9=this.$230y;if(_9==null)return;isc.EH.clearLimitedComponentEvents(_9[0],_9[1]);delete this.$230y}},isc.A.$224y=function isc_TourStep__setupTextField(_1){var _2=this,_3=this.$224n,_4=isc.AutoTest.getObject(_1.locator),_5=this.expectedValue;if(_4==null){this.logWarn("Unable to resolve locator for change action to formItem: "+_1.locator);return}
if(_4.parentItem!=null){this.logInfo("TourStep Locator:"+_1.locator+(_5!=null?" with expected value "+_5:"")+" resolved to the item:"+_4+". This item has a parentItem: "+_4.parentItem+". Watching for value change on the parent item.","tour");_4=_4.parentItem}
var _6=_1.afterInputTarget,_7=_4.type,_8=this.expectedValueCaseSensitive,_9;if(isc.isA.String(_5)){_5=_5.evalDynamicString(this,this.$224n.state);_5=_5.replace(/^\s+|\s+$/g,'');if(_7=="boolean"){_5=(_5.toLowerCase()=="true")}else{if(_5.startsWith("/")&&_5.endsWith("/")){_5=_5.substring(1,_5.length-1);var _10=(!_8?"i":null);try{_9=new RegExp(_5,_10)}catch(e){this.logWarn("expectedValue '"+_5+"' was marked as a RegExp but could not be parsed. Treating it as a literal value.")}}}}
var _11=this.specifiedExpectedValue=_5;if(!_9&&!_8&&isc.isA.String(_5)){_5=_5.toLowerCase()}
this.$228f=_5;this.$228g=_9;var _12=this.targetView,_13=this.inputValidation,_14=this.inputValidationNotifyDelay||this.$224w;if(!_13){_13="notify"}
_4.addProperties({task:this,originalDestroy:_4.destroy,destroy:function(){this.task.itemDestroyed(this,_1);return this.Super("destroy",arguments)},validateFieldPrecondition:function(_28,_25,_29,_30){var _2=this.task,_5=_2.expectedValue,_13=_2.inputValidation;if(_5!=null){var _15=_30.changing,_16=_30.exiting;if(_15||(_16&&_13=="onExit")){this.cancelActionOnPause("tourNotify");_18=_2.testExpectedValue(this,_25);if(_15){if(_13=="onExit"){this.alwaysValidateOnExit=true}
if(!_18){var _17=_25==null?"":_25;if(_13=="strict"&&isc.isA.String(_17)&&!this.$228g)
{if(!_2.matchesExpectedValueStart(_17)){this.$17t();return false}}}
if(_13!="onExit"&&!_2.suppressValidation){this.origForceValidateOnChange=this.forceValidateOnChange;this.forceValidateOnChange=true}}
this.$229j=_18}}
return true},validateFieldPostcondition:function(_28,_25,_29,_30,_31){this.forceValidateOnChange=this.origForceValidateOnChange;var _2=this.task;var _18=(this.$229j!==false)&&(_2.suppressValidation||_31==null||_31.errors==null),_19=(_18&&!_2.suppressValidation&&this.form.$75a&&this.form.$75a[this.name]!=null&&this.form.$75a[this.name].length>0);var _20=_30.changing,_21=_30.exiting,_13=_2.inputValidation,_5=_2.expectedValue,_6=_2.afterInputTarget,_14=_2.inputValidationNotifyDelay,_22=(_13=="onExit"),_23=!_19&&_18;if(_20){this.setDisallowEditorExit(!_18)}
if(_20||(_21&&(_22||_2.afterInputTarget))){if(_19){this.$229k=true}
if(_6!=null){_2.setAfterInputTargetMask(_6,_18);if(!_23&&_21){this.$2240(_25,_14)}}else if(!_22||_21){if(_23){this.logDebug("change value, "+_25+", matched expected. step complete.","tour");_2.delayCall("stepComplete")}else{var _24=!_19&&(!_20||(_31&&_31.errors)!=null||!_2.matchesExpectedValueStart(_25+""));if(_24){this.$2240(_25,_14)}
this.logDebug("change value, "+this.echo(_25)+", does not match expected: "+this.echo(_5)+". step incomplete.","tour");_2.stepIncomplete()}}}},handleAsyncValidationReply:function(_28,_29,_30){var _2=this.task;if(_2.suppressValidation)return;if(_30&&_30.$229i){return}
var _25=this.getValue(),_13=_2.inputValidation,_14=_2.inputValidationNotifyDelay,_6=_2.afterInputTarget;if(this.$229k&&_6==null){if(_28){this.logDebug("change value, "+_25+", matched expected. step complete.","tour");_2.delayCall("stepComplete")}else{if(_13!="onExit"){this.$2240(_25,_14)}
this.logDebug("change value, "+this.echo(_25)+", does not match expected: "+this.echo(_5)+". step incomplete.","tour");_2.stepIncomplete()}}
delete this.$229k},orig_handleKeyPress:_4.handleKeyPress,handleKeyPress:function(){var _26=isc.EH.getKey();if(this.shouldDisallowEditorExit()&&_5&&this.$228c.contains(_26))
{this.$2240(this.getValue())}
return this.Super("handleKeyPress",arguments)},$2240:function(_25,_28){this.fireOnPause("tourNotify",function(){var _11=this.task.specifiedExpectedValue;if(this.$229j){if(this.getErrors()==null)return;_11=null}
_2.$226k(_25,_11,this.getErrors())},_28||0)}});var _27=(this.expectedValue==null)||this.testExpectedValue(_4,_4.getValue());if(_27&&!this.suppressValidation&&_4.hasErrors())_27=false;_4.setDisallowEditorExit(!_27)},isc.A.itemDestroyed=function isc_TourStep_itemDestroyed(_1,_2){var _3=this;this.delayCall("waitForTargetsDone",[function(){_3.$224y(_3.targets[0])}],100)},isc.A.matchesExpectedValueStart=function isc_TourStep_matchesExpectedValueStart(_1){var _2=this.expectedValue.substring(0,_1.length);if(!this.expectedValueCaseSensitive)_2=_2.toLowerCase()
return this.stringComparison(_1,_2)},isc.A.stringComparison=function isc_TourStep_stringComparison(_1,_2){if(isc.isA.String(_1)&&!this.expectedValueCaseSensitive){_1=_1.toLowerCase()}
return(_1==_2)},isc.A.testExpectedValue=function isc_TourStep_testExpectedValue(_1,_2){var _3=this.$228f,_4=this.$228g;return!!(_4?_4.test(_2):this.stringComparison(_2,_3))},isc.A.$224z=function isc_TourStep__restoreTextField(_1){var _2=isc.AutoTest.getObject(_1.locator);if(!_2||!isc.isA.FormItem(_2)){return}
if(_2.parentItem!=null){_2=_2.parentItem}
if(_2.$2240){delete _2.validateFieldPrecondition;delete _2.validateFieldPostcondition;delete _2.handleAsyncValidationReply;delete _2.alwaysValidateOnExit;_2.destroy=_2.originalDestroy}
return _2.getValue&&_2.getValue()},isc.A.$226k=function isc_TourStep__notifyExpectedValue(_1,_2,_3){var _4=this.$224n,_5=this.showInputValidationMessage;if(_5==null)_5=_4.showInputValidationMessage;if(_5==false)return;if(_4&&_4.notifyValidationMessage){if(_2!=null){var _6={value:_1,expectedValue:_2},_7=this.inputValidationNotifyMessage.evalDynamicString(this,_6)}
if(_3!=null){if(!isc.isAn.Array(_3))_3=[_3];if(_7==null)_7="";_7+="<P>"+_3.join("<P>")}
_4.notifyValidationMessage(_7)}},isc.A.$2293=function isc_TourStep__setupMenu(_1){var _2=_1.type=="menuItemSelect",_3=isc.AutoTest.getObject(_1.locator),_4=this;if(!isc.isA.Menu(_3)){this.logWarn("Unable to derive menu for actionType:"+_1.type+" from locator:"+_1.locator);return}
if(_2){var _5=function callback(_6){_4.menuObservation(_3,_6,_1,true)}
this.observe(_3,"selectMenuItem",_5)}else{var _5=function callback(_6){_4.menuObservation(_3,_6,_1,false)}
this.observe(_3,"showSubmenu",_5)}
_1.menu=_3},isc.A.$2292=function isc_TourStep__restoreMenu(_1){var _2=_1.type;if(_2=="menuItemSelect"){if(this.isObserving(_1.menu,"selectMenuItem"))this.ignore(_1.menu,"selectItemMenu")}else{if(this.isObserving(_1.menu,"showSubmenu"))this.ignore(_1.menu,"showSubmenu")}},isc.A.menuObservation=function isc_TourStep_menuObservation(_1,_2,_3,_4){if(!_4){var _5=_1.getRowNum(_2),_6=_1.body.getTableElement(_5),_7=isc.AutoTest.getElement(_3.locator);if((_6==null||_7==null)||(_6!=_7&&!_6.contains(_7)))return}
this.ignore(_1,(_4?"selectMenuItem":"showSubmenu"));this.stepComplete()},isc.A.placeArrow=function isc_TourStep_placeArrow(_1){if(!_1||_1.length==0)return;if(_1.length==1||_1.find("type","textClick")){this.$2238(_1[0].locator);return}
var _2,_3;for(var i=0;i<_1.length;i++){var _5=_1[i];if(_5.type=="drag"){_2=_5}else if(_5.type=="drop"){_3=_5}}
if(_2&&_3){this.$2237(_2,_3)}else if(_2){this.$2238(_2)}},isc.A.hideArrow=function isc_TourStep_hideArrow(){if(this.arrow)this.arrow.hide()},isc.A.destroyArrow=function isc_TourStep_destroyArrow(){if(this.arrow){this.arrow.hide();this.arrow.markForDestroy();delete this.arrow}},isc.A.$2237=function isc_TourStep__pointArrowToTarget(_1,_2){var _3=_1.locator,_4=isc.AutoTest.getObject(_3),_5=this.$2239(_3,_4),_6=_5[0]+_5[2]/2,_7=_5[1]+_5[3]/2,_8=_2.locator,_9=isc.AutoTest.getObject(_8),_10=this.$2239(_8,_9,this.dropQuadrant),_11=_10[0]+_10[2]/2,_12=_10[1]+_10[3]/2,_13=20;var _14=_11-_6,_15=_12-_7,_16,_17,_18,_19,_20,_21;if(Math.abs(_14)>Math.abs(_15)){_16=(_14<0?_5[0]-_13:_5[0]+_5[2]+_13);_17=_7;_18=(_14<0?180:0);_19=1;_20=_16;_21=_17;if(isc.Canvas.rectEnclosesRect(_10,[_20,_21,1,1])){_20=(_14<0?_5[0]+_5[2]:_5[0])}}else{_16=_6;_17=(_15<0?_5[1]-_13:_5[1]+_5[3]+_13);_18=(_15<0?270:90);_19=0;_20=_16;_21=_17;if(isc.Canvas.rectEnclosesRect(_10,[_20,_21,1,1])){_21=(_15<0?_5[1]+_5[3]:_5[1])}}
var _22=this.getArrow(),_23=this.getArrowRotation([_20,_21],[_11,_12]);_22.rotate(_23);var _24=_22.getVisibleWidth()-_22.shadowPadding*2,_25=_22.getVisibleHeight()-_22.shadowPadding*2,_26=[_24/2,_25/2],_27=_26[_19],_28=(_18==0&&_23>270?360:_18),_29=_27+Math.round(_27*((_23-_28)/45)),_30,_31;if(_18==180||_18==0){_30=(_14<0?_16-_24:_16);_31=_17-_29}else{_30=_16-_29;_31=(_15<0?_17-_25:_17)}
if(_18==_23){if(_18==180){if(_30<_10[0]+_10[2]){_30=_11}}else if(_18==0){if(_30+_24>_10[0]){_30=_11-_24}}else if(_18==90){if(_31+_25>_10[1]){_31=_12-_25}}else{if(_31<_10[1]){_31=_12}}
var _32=function(_39){var _33=Math.max(_39[1],_31-_22.topOffset),_34=Math.min(_39[1]+_39[3],_31+_22.getVisibleHeight()),_35=Math.max(_39[0],_30-_22.leftOffset),_36=Math.min(_39[0]+_10[2],_30+_22.getVisibleWidth());return(_34-_33)*(_36-_35)};var _37=_5[2]*_5[3],_38=_10[2]*_10[3];if(_32(_10)>_38*0.30||_32(_5)>_37*0.30)
{if(_18==0){_30=_5[0]-_24-_13}else if(_18==180){_30=_5[0]+_5[2]+_13}else if(_18==90){_31=_5[1]-_25-_13}else if(_18==270){_31=_5[1]+_5[3]+_13}}}
_22.moveTo(Math.round(_30-_22.leftOffset),Math.round(_31-_22.topOffset));_22.bringToFront();if(this.showArrow!=false){_22.show()}},isc.A.$2238=function isc_TourStep__pointArrowAtSource(_1){var _2=isc.AutoTest.getObject(_1),_3=this.$2239(_1,_2),_4=_3[0],_5=_3[1],_6=_3[2],_7=_3[3],_8=_5+_7,_9=_4+_6,_10=isc.Page.getHeight(),_11=isc.Page.getWidth(),_12=this.getArrow();var _13=(_8>(_10-(_11*0.08)));var _14=!_13&&((_8+_12.getWidth()+10)>(_10-(_11*0.15))),_15;if(_6<100){var _16=_4+(_6/2),_17=_11*0.15,_18=_11/2;if((_18-_17)<_16&&_16<(_18+_17)){_14=true;if(_4>(_11-_9)){_15=true}
this.$2235=true}}
if(_15==null&&_14){if(_9<_11/2||(_4-_12.getWidth()-10)<=0){_15=true}}
var _19=false;for(var i=0;i<2;i++){if(!_14){_12.rotate(_13?90:270);var _16=_4+(_6/2),_21=_12.getVisibleWidth()-_12.shadowPadding*2,_22=_12.getVisibleHeight()-_12.shadowPadding*2,_23=_21/2,_24=_16-_23,_25=(_13?_5-_22:_8);if(_24<=5||(_24+_21>_11-5)){_14=true;continue}
_12.moveTo(Math.round(_24-_12.leftOffset),Math.round(_25-(_13?_12.topOffset*2:0)))}
else{_12.rotate(_15?180:0);var _26=_5+(_7/2),_21=_12.getVisibleWidth()-_12.shadowPadding*2,_22=_12.getVisibleHeight()-_12.shadowPadding*2,_27=_22/2,_24=(_15?_9:_4-_21),_25=_26-_27;if(_25<=5||(_25+_22>_10-5)){_14=false;if(this.$2235){var _26=_5+(_7/2),_17=_10*0.15,_28=_10/2;if((_28-_17)<_26&&_26<(_28+_17)){if(_5<(_10-_8)){_13=true}}else{this.$2235=false}}
continue}
_12.moveTo(Math.round(_24-(_15?0:_12.leftOffset*2)),Math.round(_25-_12.topOffset))}
_19=true;break}
if(!_19){var _24,_25;if(_5<_10/2){if(_9<_11/2){_12.rotate(225);_24=_9}else{_12.rotate(315);var _21=_12.getVisibleWidth()-_12.shadowPadding*2;_24=_4-_21}
_25=_8}else{if(_4<_11/2){_12.rotate(135);_24=_9}else{_12.rotate(45);var _21=_12.getVisibleWidth()-_12.shadowPadding*2;_24=_4-_21}
var _22=_12.getVisibleHeight()-_12.shadowPadding*2;_25=_5-_22}
_12.moveTo(Math.round(_24-_12.leftOffset),Math.round(_25-_12.topOffset))}
_12.bringToFront();if(this.showArrow!=false){_12.show()}},isc.A.$2236=function isc_TourStep__getLocator(_1){if(!_1)return null;if(isc.isAn.Array(_1)){_1=_1[0]}
_1=_1.replace(/^\s+|\s+$/gm,'');if(_1=="")return null;var _2=window[_1];if(_2){_1=isc.AutoTest.getLocator(_2)}else{_1=this.$224n.evalTargetAgainstState(_1)}
return _1},isc.A.normalizeToItemLocator=function isc_TourStep_normalizeToItemLocator(_1){var _2=isc.AutoTest.getObject(_1);var _3=_2&&isc.isA.FormItem(_2);if(!_3)return _1;var _4=_2&&isc.AutoTest.getLocator(_2);if(!_4.endsWith("/"))_4+="/";_4+="handle";return _4},isc.A.normalizeToComponentLocator=function isc_TourStep_normalizeToComponentLocator(_1){var _2=isc.AutoTest.getObject(_1);var _3=_2&&isc.isA.FormItem(_2);if(_3)_2=_2.containerWidget;return _2&&isc.AutoTest.getLocator(_2)},isc.A.$2239=function isc_TourStep__getTargetPageRect(_1,_2,_3){if(_2)_2=isc.AutoTest.getObject(_1);var _4=_2.getPageLeft(),_5=_2.getVisibleWidth(),_6=_2.getPageTop(),_7=_2.getVisibleHeight();if(isc.isA.ListGrid(_2)){var _8=isc.AutoTest.getRecord(_1),_9=_8&&_2.getRowNum(_8);if(_9>=0){_6=_2.getRowPageTop(_9);_7=_2.getRowHeight(_8,_9);var _10=this.$224n.getOutlineCanvas(_1),_11=isc.AutoTest.getField(_1);if(_11){_4=_10.getPageLeft();_5=_10.getWidth()}else{_5=(_10&&_10.recordWidth!=null?_10.recordWidth:_2.getInnerWidth())}}}else if(isc.isA.FormItem(_2)){var _12=isc.AutoTest.getFormItemIcon(_1);if(_12){var _13=_2.getIconPageRect(_12);if(_13){_4=_13[0];_6=_13[1];_5=_13[2];_7=_13[3]}}}else if(_3!=null){if(_3.contains("T")){_7=Math.round(_7/4)}else if(_3.contains("B")){_7=Math.round(_7/4);_6+=_7*3}
if(_3.contains("L")){_5=Math.round(_5/4)}else if(_3.contains("R")){_5=Math.round(_5/2);_4+=_5*3}}
return[_4,_6,_5,_7]},isc.A.getArrow=function isc_TourStep_getArrow(){if(!this.arrow){this.arrow=this.createAutoChild("arrow");this.arrowItem=this.createAutoChild("arrowItem",{drawPane:this.arrow})}
return this.arrow},isc.A.getArrowRotation=function isc_TourStep_getArrowRotation(_1,_2){var _3=0.0;if(_1[1]==_2[1]){_3=0+(_1[0]<_2[0]?180:0)}else if(_1[0]==_2[0]){_3=0+(_1[1]<_2[1]?90:270)}else{var a=(_2[1]-_1[1]),b=(_2[0]-_1[0]),d=Math.abs(Math.atan(a/b)*180.0/3.14159);_3=(a>=0&&b>=0?d:a>=0&&b<0?(90-d)+90:a<0&&b<0?d+180:d+270)}
return _3});isc.B._maxIndex=isc.C+53;isc.defineClass("TourConfirmStep","UserTask");isc.A=isc.TourConfirmStep.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.cancelButtonTitle="Cancel";isc.A.actionButtonTitle="OK";isc.A.targetViewConstructor="TourWindow";isc.A.targetViewDefaults={actionClick:function(){var _1=this.userTask;if(_1.nextElement)_1.$224n.setNextElement(_1.nextElement);_1.completeEditing()},cancelClick:function(){var _1=this.userTask;if(!_1.failureElement){_1.logWarn("TourConfirmStep does not have a failureElement. Process is aborting.")}
_1.$224n.setNextElement(_1.failureElement);_1.completeEditing()},closeClick:function(){var _1=this.userTask,_2=_1.$224n;if(!_1.failureElement){_1.logWarn("TourConfirmStep does not have a failureElement. Process is aborting.")}
_2.setNextElement(_1.failureElement);_2.setStateVariable("closed",true);_1.completeEditing()}};isc.B.push(isc.A.executeElement=function isc_TourConfirmStep_executeElement(_1){this.$224n=_1;if(!this.ID)this.ID="tourStepConfirm"+this.stepNum;_1.setTaskOutput(this,_1.getLastTaskOutput());this.createTargetView();return this.Super("executeElement",[_1])},isc.A.completeElement=function isc_TourConfirmStep_completeElement(_1){this.targetView.markForDestroy()},isc.A.createTargetView=function isc_TourConfirmStep_createTargetView(_1){var _2=this.$224n,_3=_2.state,_4=this.title,_5=this.instructions||this.contents,_6={tourStep:this,title:(_4?_4.evalDynamicString(this,_3):null),contents:(_5?_5.evalDynamicString(this,_3):null),showCancelButton:true,showActionButton:true};if(_2.showProgress){var _7=Math.round((this.stepNum-1)/_2.stepCount*100.0);isc.addProperties(_6,{showProgress:true,percentDone:_7,showProgressPercent:_2.showProgressPercent,showProgressPercentInline:_2.showProgressPercentInline})}
if(_2.windowDefaults){isc.addProperties(_6,_2.windowDefaults)}
if(this.windowDefaults){isc.addProperties(_6,this.windowDefaults)}
isc.TourStep.applyTourStepProperties(_6,this);this.targetView=this.createAutoChild("targetView",_6);this.targetView.bringToFront()});isc.B._maxIndex=isc.C+3}else{var errorMessage="Unspecified error instantiating Tour",hasWorkflow=(isc.Process!=null),hasDrawing=(isc.DrawPane!=null);if(!hasWorkflow||!hasDrawing){errorMessage="Tour class must be loaded after the"+(!hasWorkflow?" DataBinding module"+(hasDrawing?"":" and"):"")+(!hasDrawing?" Drawing module":"")+". Please make sure the DataBinding and Drawing modules are included in this page before the Tour module."}
isc.defineClass("Tour");isc.A=isc.Tour;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.invalidClass=true;isc.A.invalidErrorMessage=errorMessage;isc.B.push(isc.A.loadTour=function isc_c_Tour_loadTour(_1,_2){return isc.Tour.create()},isc.A.getTour=function isc_c_Tour_getTour(_1){return isc.Tour.create()});isc.B._maxIndex=isc.C+2;isc.A=isc.Tour.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_Tour_init(){this.logWarn(isc.Tour.invalidErrorMessage);this.Super("init",arguments)},isc.A.start=function isc_Tour_start(){},isc.A.reset=function isc_Tour_reset(){},isc.A.setState=function isc_Tour_setState(){});isc.B._maxIndex=isc.C+4;isc.defineClass("TourStep");isc.defineClass("TourConfirmStep")}
isc._nonDebugModules=(isc._nonDebugModules!=null?isc._nonDebugModules:[]);isc._nonDebugModules.push('Tour');isc.checkForDebugAndNonDebugModules();isc._moduleEnd=isc._Tour_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('Tour module init time: '+(isc._moduleEnd-isc._moduleStart)+'ms','loadTime');delete isc.definingFramework;if(isc.Page)isc.Page.handleEvent(null,"moduleLoaded",{moduleName:'Tour',loadTime:(isc._moduleEnd-isc._moduleStart)});}else{if(window.isc&&isc.Log&&isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'Tour'.");}
